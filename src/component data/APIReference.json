{
  "title": "Clipposaurus API Reference",
  "description": "Complete API documentation for integrating with Clipposaurus programmatically",
  "baseUrl": "https://clipposaurus.com/api",
  "version": "v1",
  "authentication": {
    "type": "none",
    "description": "Clipposaurus API does not require authentication. Rate limiting is applied per IP address."
  },
  "rateLimiting": {
    "description": "Rate limits are applied to prevent abuse",
    "limits": [
      {
        "endpoint": "All endpoints",
        "limit": "100 requests per hour per IP",
        "headers": [
          "X-RateLimit-Limit: Maximum requests allowed",
          "X-RateLimit-Remaining: Requests remaining",
          "X-RateLimit-Reset: Reset time in Unix timestamp"
        ]
      }
    ]
  },
  "contentTypes": {
    "request": "application/json",
    "response": "application/json",
    "upload": "multipart/form-data or application/json"
  },
  "endpoints": [
    {
      "group": "Content Sharing",
      "endpoints": [
        {
          "method": "POST",
          "path": "/create-drop",
          "name": "Create Drop",
          "description": "Create a new content drop with text, code, and/or files",
          "headers": {
            "required": ["Content-Type: application/json"],
            "optional": [
              "X-Recaptcha-Token: reCAPTCHA v3 token for spam protection"
            ]
          },
          "requestBody": {
            "type": "object",
            "description": "Content to be shared",
            "properties": {
              "textContent": {
                "type": "string",
                "required": false,
                "description": "Plain text content to share",
                "maxLength": "No limit"
              },
              "codeContent": {
                "type": "string",
                "required": false,
                "description": "Code content to share with syntax highlighting",
                "maxLength": "No limit"
              },
              "codeLanguage": {
                "type": "string",
                "required": false,
                "description": "Programming language for syntax highlighting",
                "examples": [
                  "javascript",
                  "python",
                  "java",
                  "cpp",
                  "html",
                  "css",
                  "sql"
                ]
              },
              "files": {
                "type": "array",
                "required": false,
                "description": "Array of files to upload",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "description": "Unique identifier for the file"
                    },
                    "name": {
                      "type": "string",
                      "description": "Original filename with extension"
                    },
                    "content": {
                      "type": "string",
                      "description": "Base64 encoded file content or data URL"
                    },
                    "size": {
                      "type": "number",
                      "description": "File size in bytes",
                      "maximum": 52428800
                    },
                    "lastModified": {
                      "type": "number",
                      "description": "Last modified timestamp"
                    }
                  },
                  "required": ["id", "name", "content", "size", "lastModified"]
                },
                "maxItems": 20,
                "totalSizeLimit": "50MB across all files"
              },
              "recaptchaToken": {
                "type": "string",
                "required": false,
                "description": "reCAPTCHA v3 token for bot protection"
              }
            }
          },
          "responses": {
            "200": {
              "description": "Drop created successfully",
              "schema": {
                "type": "object",
                "properties": {
                  "success": {
                    "type": "boolean",
                    "value": true
                  },
                  "code": {
                    "type": "string",
                    "description": "Unique access code (magic words) for the drop",
                    "example": "happy-blue-elephant-42"
                  },
                  "expiresAt": {
                    "type": "string",
                    "description": "ISO timestamp when the drop expires",
                    "example": "2023-12-01T12:00:00.000Z"
                  },
                  "shareUrl": {
                    "type": "string",
                    "description": "Direct URL to access the drop",
                    "example": "https://clipposaurus.com/showcase?code=happy-blue-elephant-42"
                  }
                }
              }
            },
            "400": {
              "description": "Bad request - invalid input",
              "schema": {
                "type": "object",
                "properties": {
                  "success": {
                    "type": "boolean",
                    "value": false
                  },
                  "error": {
                    "type": "string",
                    "examples": [
                      "No content provided",
                      "File size exceeds 50MB limit",
                      "Invalid file format",
                      "Request too large"
                    ]
                  }
                }
              }
            },
            "429": {
              "description": "Rate limit exceeded",
              "schema": {
                "type": "object",
                "properties": {
                  "success": {
                    "type": "boolean",
                    "value": false
                  },
                  "error": {
                    "type": "string",
                    "value": "Rate limit exceeded"
                  },
                  "retryAfter": {
                    "type": "number",
                    "description": "Seconds until rate limit resets"
                  }
                }
              }
            },
            "500": {
              "description": "Internal server error",
              "schema": {
                "type": "object",
                "properties": {
                  "success": {
                    "type": "boolean",
                    "value": false
                  },
                  "error": {
                    "type": "string",
                    "examples": [
                      "Storage service unavailable",
                      "Encryption failed",
                      "Database error"
                    ]
                  }
                }
              }
            }
          },
          "examples": [
            {
              "title": "Text Content Only",
              "request": {
                "textContent": "Hello, this is a test message from the API!"
              },
              "response": {
                "success": true,
                "code": "happy-blue-elephant-42",
                "expiresAt": "2023-12-01T12:00:00.000Z",
                "shareUrl": "https://clipposaurus.com/showcase?code=happy-blue-elephant-42"
              }
            },
            {
              "title": "Code Snippet",
              "request": {
                "codeContent": "function hello() {\n  console.log('Hello, World!');\n}",
                "codeLanguage": "javascript"
              },
              "response": {
                "success": true,
                "code": "clever-red-fox-15",
                "expiresAt": "2023-12-01T12:00:00.000Z",
                "shareUrl": "https://clipposaurus.com/showcase?code=clever-red-fox-15"
              }
            },
            {
              "title": "File Upload",
              "request": {
                "files": [
                  {
                    "id": "file-123",
                    "name": "document.pdf",
                    "content": "data:application/pdf;base64,JVBERi0xLjQKJcOkw7zDssOgCj...",
                    "size": 1024000,
                    "lastModified": 1701432000000
                  }
                ]
              },
              "response": {
                "success": true,
                "code": "bright-green-star-88",
                "expiresAt": "2023-12-01T12:00:00.000Z",
                "shareUrl": "https://clipposaurus.com/showcase?code=bright-green-star-88"
              }
            }
          ]
        }
      ]
    },
    {
      "group": "Content Retrieval",
      "endpoints": [
        {
          "method": "POST",
          "path": "/open-drop",
          "name": "Open Drop",
          "description": "Retrieve content using the access code",
          "headers": {
            "required": ["Content-Type: application/json"]
          },
          "requestBody": {
            "type": "object",
            "properties": {
              "code": {
                "type": "string",
                "required": true,
                "description": "The access code (magic words) for the drop",
                "example": "happy-blue-elephant-42"
              },
              "recaptchaToken": {
                "type": "string",
                "required": false,
                "description": "reCAPTCHA v3 token for bot protection"
              }
            },
            "required": ["code"]
          },
          "responses": {
            "200": {
              "description": "Drop retrieved successfully",
              "schema": {
                "type": "object",
                "properties": {
                  "success": {
                    "type": "boolean",
                    "value": true
                  },
                  "data": {
                    "type": "object",
                    "properties": {
                      "textContent": {
                        "type": "string",
                        "description": "Plain text content if available"
                      },
                      "codeContent": {
                        "type": "string",
                        "description": "Code content if available"
                      },
                      "codeLanguage": {
                        "type": "string",
                        "description": "Programming language of the code"
                      },
                      "files": {
                        "type": "array",
                        "description": "Array of uploaded files",
                        "items": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "string",
                              "description": "File identifier"
                            },
                            "name": {
                              "type": "string",
                              "description": "Original filename"
                            },
                            "url": {
                              "type": "string",
                              "description": "Download URL for the file"
                            },
                            "size": {
                              "type": "number",
                              "description": "File size in bytes"
                            },
                            "lastModified": {
                              "type": "number",
                              "description": "Last modified timestamp"
                            },
                            "provider": {
                              "type": "string",
                              "description": "Storage provider name",
                              "examples": [
                                "Cloudflare R2",
                                "Backblaze B2",
                                "Storj"
                              ]
                            }
                          }
                        }
                      },
                      "createdAt": {
                        "type": "string",
                        "description": "ISO timestamp when drop was created"
                      },
                      "expiresAt": {
                        "type": "string",
                        "description": "ISO timestamp when drop expires"
                      }
                    }
                  }
                }
              }
            },
            "400": {
              "description": "Bad request",
              "schema": {
                "type": "object",
                "properties": {
                  "success": {
                    "type": "boolean",
                    "value": false
                  },
                  "error": {
                    "type": "string",
                    "examples": [
                      "Access code is required",
                      "Invalid access code format"
                    ]
                  }
                }
              }
            },
            "404": {
              "description": "Drop not found or expired",
              "schema": {
                "type": "object",
                "properties": {
                  "success": {
                    "type": "boolean",
                    "value": false
                  },
                  "error": {
                    "type": "string",
                    "value": "Content not found or has expired"
                  }
                }
              }
            }
          },
          "examples": [
            {
              "title": "Successful Retrieval",
              "request": {
                "code": "happy-blue-elephant-42"
              },
              "response": {
                "success": true,
                "data": {
                  "textContent": "Hello, this is a test message!",
                  "createdAt": "2023-12-01T11:00:00.000Z",
                  "expiresAt": "2023-12-01T12:00:00.000Z"
                }
              }
            }
          ]
        }
      ]
    },
    {
      "group": "Content Management",
      "endpoints": [
        {
          "method": "DELETE",
          "path": "/delete-drop",
          "name": "Delete Drop",
          "description": "Manually delete a drop before it expires",
          "headers": {
            "required": ["Content-Type: application/json"]
          },
          "requestBody": {
            "type": "object",
            "properties": {
              "code": {
                "type": "string",
                "required": true,
                "description": "The access code for the drop to delete"
              },
              "recaptchaToken": {
                "type": "string",
                "required": false,
                "description": "reCAPTCHA v3 token for security"
              }
            },
            "required": ["code"]
          },
          "responses": {
            "200": {
              "description": "Drop deleted successfully",
              "schema": {
                "type": "object",
                "properties": {
                  "success": {
                    "type": "boolean",
                    "value": true
                  },
                  "message": {
                    "type": "string",
                    "value": "Drop deleted successfully"
                  }
                }
              }
            },
            "404": {
              "description": "Drop not found",
              "schema": {
                "type": "object",
                "properties": {
                  "success": {
                    "type": "boolean",
                    "value": false
                  },
                  "error": {
                    "type": "string",
                    "value": "Drop not found"
                  }
                }
              }
            }
          }
        }
      ]
    },
    {
      "group": "File Operations",
      "endpoints": [
        {
          "method": "POST",
          "path": "/proxy-download",
          "name": "Download File",
          "description": "Download and decrypt files from storage",
          "headers": {
            "required": ["Content-Type: application/json"]
          },
          "requestBody": {
            "type": "object",
            "properties": {
              "url": {
                "type": "string",
                "required": true,
                "description": "The file URL obtained from open-drop response"
              },
              "fileName": {
                "type": "string",
                "required": true,
                "description": "Original filename for proper Content-Disposition header"
              }
            },
            "required": ["url", "fileName"]
          },
          "responses": {
            "200": {
              "description": "File downloaded successfully",
              "headers": [
                "Content-Type: application/octet-stream or original MIME type",
                "Content-Disposition: attachment; filename=\"original-filename\"",
                "Content-Length: file size in bytes"
              ],
              "body": "Binary file content"
            },
            "400": {
              "description": "Invalid request",
              "schema": {
                "type": "object",
                "properties": {
                  "error": {
                    "type": "string",
                    "examples": [
                      "URL and fileName are required",
                      "Invalid file URL"
                    ]
                  }
                }
              }
            },
            "500": {
              "description": "Download failed",
              "schema": {
                "type": "object",
                "properties": {
                  "error": {
                    "type": "string",
                    "examples": ["Failed to download file", "Decryption failed"]
                  }
                }
              }
            }
          }
        }
      ]
    },
    {
      "group": "Utility",
      "endpoints": [
        {
          "method": "GET",
          "path": "/public-drop-key",
          "name": "Get Public Drop Key",
          "description": "Get public key for client-side operations (if applicable)",
          "responses": {
            "200": {
              "description": "Public key retrieved",
              "schema": {
                "type": "object",
                "properties": {
                  "identifier": {
                    "type": "string",
                    "description": "Base64 encoded public key"
                  }
                }
              }
            }
          }
        },
        {
          "method": "GET",
          "path": "/component-data",
          "name": "Get Component Data",
          "description": "Retrieve UI component data and configurations",
          "responses": {
            "200": {
              "description": "Component data retrieved",
              "schema": {
                "type": "object",
                "description": "Dynamic component configuration data"
              }
            }
          }
        }
      ]
    }
  ],
  "errorCodes": {
    "description": "Standard HTTP status codes with Clipposaurus-specific error messages",
    "codes": [
      {
        "code": 400,
        "title": "Bad Request",
        "description": "Invalid request format or parameters",
        "commonCauses": [
          "Missing required fields",
          "Invalid JSON format",
          "File size exceeds limits",
          "Unsupported content type"
        ]
      },
      {
        "code": 404,
        "title": "Not Found",
        "description": "Requested resource not found",
        "commonCauses": [
          "Invalid or expired access code",
          "Drop has been manually deleted",
          "File no longer exists"
        ]
      },
      {
        "code": 429,
        "title": "Rate Limited",
        "description": "Too many requests from the same IP",
        "commonCauses": [
          "Exceeded hourly request limit",
          "Suspicious activity detected",
          "Bot protection triggered"
        ]
      },
      {
        "code": 500,
        "title": "Internal Server Error",
        "description": "Server-side error occurred",
        "commonCauses": [
          "Storage service unavailable",
          "Encryption/decryption failure",
          "Database connectivity issues"
        ]
      }
    ]
  },
  "sdkExamples": {
    "javascript": {
      "title": "JavaScript/Node.js Example",
      "code": "// Create a drop\nconst createDrop = async (content) => {\n  const response = await fetch('https://clipposaurus.com/api/create-drop', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(content)\n  });\n  \n  const result = await response.json();\n  return result;\n};\n\n// Open a drop\nconst openDrop = async (code) => {\n  const response = await fetch('https://clipposaurus.com/api/open-drop', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ code })\n  });\n  \n  const result = await response.json();\n  return result;\n};\n\n// Example usage\nconst main = async () => {\n  // Create a text drop\n  const textDrop = await createDrop({\n    textContent: 'Hello from API!'\n  });\n  \n  console.log('Drop created:', textDrop.code);\n  \n  // Retrieve the drop\n  const content = await openDrop(textDrop.code);\n  console.log('Retrieved content:', content.data);\n};\n\nmain().catch(console.error);"
    },
    "python": {
      "title": "Python Example",
      "code": "import requests\nimport json\n\ndef create_drop(content):\n    \"\"\"Create a new drop\"\"\"\n    response = requests.post(\n        'https://clipposaurus.com/api/create-drop',\n        headers={'Content-Type': 'application/json'},\n        json=content\n    )\n    return response.json()\n\ndef open_drop(code):\n    \"\"\"Open an existing drop\"\"\"\n    response = requests.post(\n        'https://clipposaurus.com/api/open-drop',\n        headers={'Content-Type': 'application/json'},\n        json={'code': code}\n    )\n    return response.json()\n\n# Example usage\nif __name__ == '__main__':\n    # Create a code drop\n    code_content = {\n        'codeContent': 'print(\"Hello, World!\")',\n        'codeLanguage': 'python'\n    }\n    \n    result = create_drop(code_content)\n    print(f\"Drop created: {result['code']}\")\n    \n    # Retrieve the drop\n    content = open_drop(result['code'])\n    print(f\"Retrieved code: {content['data']['codeContent']}\")"
    },
    "curl": {
      "title": "cURL Examples",
      "code": "# Create a text drop\ncurl -X POST https://clipposaurus.com/api/create-drop \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"textContent\": \"Hello from cURL!\"\n  }'\n\n# Open a drop\ncurl -X POST https://clipposaurus.com/api/open-drop \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"code\": \"happy-blue-elephant-42\"\n  }'\n\n# Delete a drop\ncurl -X DELETE https://clipposaurus.com/api/delete-drop \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"code\": \"happy-blue-elephant-42\"\n  }'"
    }
  },
  "bestPractices": {
    "title": "API Best Practices",
    "practices": [
      {
        "category": "Error Handling",
        "recommendations": [
          "Always check the 'success' field in responses",
          "Handle rate limiting with exponential backoff",
          "Implement proper retry logic for 5xx errors",
          "Parse error messages for user-friendly feedback"
        ]
      },
      {
        "category": "Security",
        "recommendations": [
          "Use HTTPS for all API calls",
          "Validate access codes on client side",
          "Implement proper reCAPTCHA integration",
          "Store access codes securely"
        ]
      },
      {
        "category": "Performance",
        "recommendations": [
          "Compress large payloads before sending",
          "Use appropriate timeouts for file uploads",
          "Cache public data when appropriate",
          "Minimize API calls with batch operations"
        ]
      },
      {
        "category": "File Handling",
        "recommendations": [
          "Validate file sizes before upload",
          "Use proper MIME type detection",
          "Encode files as base64 or data URLs",
          "Handle upload progress for better UX"
        ]
      }
    ]
  }
}
